{
  "status" : "success",
  "errorMsg" : "",
  "defects" : [ {
    "id" : "e17ab1eb893945d58e674f0356667284",
    "buggyFilePath" : "app/src/main/cpp/native-lib.cpp",
    "bugId" : "bfe630a9-f68d-4f01-b1d1-c79fdbd8071b",
    "defectLevel" : "1",
    "defectType" : "huawei-macro-define-not-const",
    "projectRoot" : "D:\\_project\\AVPipeline\\code\\TAG-2021-06-10-2213\\huawei-avpipeline-android-cpp-demo",
    "analyzerName" : "clangtidy",
    "description" : "禁止使用宏来表示常量",
    "mainBuggyLine" : 14,
    "mainBuggyCode" : "#define LOG_TAG \"avp-cppdemo\" ",
    "extra" : "",
    "language" : "C++",
    "criterionName" : "规则9.1.1 不允许使用宏来表示常量",
    "criterionType" : "common_standard_rule",
    "linkUrl" : "http://3ms.huawei.com/km/groups/3685627/blogs/details/6035703?l=zh-cn",
    "category" : "华为C++语言通用编程规范V3.3 - 9 C++其他特性",
    "recommend" : "宏是简单的文本替换，在预处理阶段时完成，运行报错时直接报相应的值；跟踪调试时也是显示值，而不是宏名；宏没有类型检查，不安全；宏没有作用域。\n样例：\n#define MAX_MSISDN_LEN 20    // 不好\n \n// C++请使用const常量\nconst int MAX_MSISDN_LEN = 20; // 好\n \n// 对于C++11以上版本，可以使用constexpr\nconstexpr int MAX_MSISDN_LEN = 20;",
    "typeName" : "",
    "ruleId" : "59dcbe1b7ffb11eab920fa163ea6de8c",
    "events" : [ ],
    "fixCode" : [ ]
  }, {
    "id" : "c46cad5fe28211e9baeefa163e12",
    "buggyFilePath" : "app/src/main/cpp/native-lib.cpp",
    "bugId" : "9da9562b-8bd7-46b9-a89b-db4b9271bd20",
    "defectLevel" : "2",
    "defectType" : "huge_method",
    "projectRoot" : "D:\\_project\\AVPipeline\\code\\TAG-2021-06-10-2213\\huawei-avpipeline-android-cpp-demo",
    "analyzerName" : "cmetrics",
    "description" : "方法{TestSoundDetect()}行数为 68 ，超出了最大行数阈值 50",
    "mainBuggyLine" : 49,
    "mainBuggyCode" : "void TestSoundDetect(string path) {",
    "extra" : "cmetrics{\"methodName\":\"TestSoundDetect()\",\"realVal\":68,\"modifiedThreshold\":50,\"supposeNew\":false}",
    "language" : "C++",
    "criterionName" : "超大方法",
    "criterionType" : "common",
    "category" : "",
    "typeName" : "",
    "ruleId" : "c8936829e27611e9baeefa163e12",
    "events" : [ ],
    "fixCode" : [ ]
  }, {
    "id" : "e52abd03977140939542dad8e79bdd28",
    "buggyFilePath" : "app/src/main/cpp/native-lib.cpp",
    "bugId" : "d10e5ec1-45a5-47c8-9be6-181880aa9836",
    "defectLevel" : "1",
    "defectType" : "C_RULE_ID_MAGICNUMBER",
    "projectRoot" : "D:\\_project\\AVPipeline\\code\\TAG-2021-06-10-2213\\huawei-avpipeline-android-cpp-demo",
    "analyzerName" : "fixbotengine-cxx",
    "description" : "不允许使用魔鬼数字。数字为： 32000",
    "mainBuggyLine" : 57,
    "mainBuggyCode" : "    meta->SetValue<int32_t>(MEDIA_ATTR_SAMPLE_RATE, 32000);",
    "mergeKey" : "",
    "extra" : "",
    "language" : "C++",
    "criterionName" : "规则9.1.2 不允许使用魔鬼数字",
    "criterionType" : "common_standard_rule",
    "linkUrl" : "http://3ms.huawei.com/km/groups/3685627/blogs/details/6035715?l=zh-cn",
    "category" : "华为C++语言通用编程规范V3.3 - 9 C++其他特性",
    "typeName" : "",
    "ruleId" : "a5e2a61d4cc549cb98af458c88ed0078",
    "events" : [ ],
    "fixCode" : [ ]
  }, {
    "id" : "54b6d9beef1f40719da468c6ef1c49cf",
    "buggyFilePath" : "app/src/main/cpp/native-lib.cpp",
    "bugId" : "1fc67b70-bfe7-45d9-8ee6-10cc2621fde2",
    "defectLevel" : "1",
    "defectType" : "C_RULE_ID_FUNCTION_SIZE",
    "projectRoot" : "D:\\_project\\AVPipeline\\code\\TAG-2021-06-10-2213\\huawei-avpipeline-android-cpp-demo",
    "analyzerName" : "fixbotengine-cxx",
    "description" : "避免函数过长，函数不超过 50 行（非空非注释）。函数行为 67。",
    "mainBuggyLine" : 49,
    "mainBuggyCode" : "void TestSoundDetect(string path) {",
    "mergeKey" : "",
    "extra" : "",
    "language" : "C++",
    "criterionName" : "规则8.1.1 避免函数过长，函数不超过50行（非空非注释）",
    "criterionType" : "common_standard_rule",
    "linkUrl" : "http://3ms.huawei.com/km/groups/3685627/blogs/details/6035681?l=zh-cn",
    "category" : "华为C++语言通用编程规范V3.3 - 8 函数",
    "recommend" : "函数的非空非注释代码行超过50行属于过长函数。",
    "typeName" : "",
    "ruleId" : "62cdaaf5bcd242d29a7285599aecffbd",
    "events" : [ ],
    "fixCode" : [ ]
  }, {
    "id" : "0d65bd871eac42d691c11fed927899da",
    "buggyFilePath" : "app/src/main/cpp/native-lib.cpp",
    "bugId" : "dfe8c73d-2bab-4e0f-a912-7709f0d900ad",
    "defectLevel" : "1",
    "defectType" : "C_RULE_ID_KR_STYLE",
    "projectRoot" : "D:\\_project\\AVPipeline\\code\\TAG-2021-06-10-2213\\huawei-avpipeline-android-cpp-demo",
    "analyzerName" : "fixbotengine-cxx",
    "description" : "换行时，函数左大括号另起一行放行首，并独占一行.[K&R Style]",
    "mainBuggyLine" : 24,
    "mainBuggyCode" : "    void OnMessage(int msg, int param1, int param2, MediaParcelSP) override {",
    "mergeKey" : "",
    "extra" : "",
    "language" : "C++",
    "criterionName" : "规则3.3.1 使用 K&R 缩进风格",
    "criterionType" : "common_standard_rule",
    "linkUrl" : "http://3ms.huawei.com/km/groups/3685627/blogs/details/6035347?l=zh-cn",
    "category" : "华为C++语言通用编程规范V3.3 - 3 格式",
    "recommend" : "换行时，函数左大括号另起一行放行首，并独占一行；\n非函数左大括号跟随语句放行末；\n右大括号独占一行，除“}while”，“}else/else if”，“、”，“;”；",
    "typeName" : "C_RULE_ID_KR_STYLE",
    "ruleId" : "701228bb7ff311eab920fa163ea6de8c",
    "events" : [ ],
    "fixCode" : [ {
      "startingLineNumber" : 24,
      "endLineNumber" : 24,
      "startCharacter" : 0,
      "endCharacter" : 0,
      "beforeFixCode" : "    void OnMessage(int msg, int param1, int param2, MediaParcelSP) override {",
      "afterFixCode" : "    void OnMessage(int msg, int param1, int param2, MediaParcelSP) override\r\n    {",
      "filePath" : "D:\\_project\\AVPipeline\\code\\TAG-2021-06-10-2213\\huawei-avpipeline-android-cpp-demo\\app\\src\\main\\cpp\\native-lib.cpp",
      "type" : "MODIFIED",
      "desc" : ""
    } ]
  }, {
    "id" : "0d65bd871eac42d691c11fed927899da",
    "buggyFilePath" : "app/src/main/cpp/native-lib.cpp",
    "bugId" : "f16fc0a9-8438-43c1-9e03-4f1c4120ed95",
    "defectLevel" : "1",
    "defectType" : "C_RULE_ID_KR_STYLE",
    "projectRoot" : "D:\\_project\\AVPipeline\\code\\TAG-2021-06-10-2213\\huawei-avpipeline-android-cpp-demo",
    "analyzerName" : "fixbotengine-cxx",
    "description" : "换行时，函数左大括号另起一行放行首，并独占一行.[K&R Style]",
    "mainBuggyLine" : 49,
    "mainBuggyCode" : "void TestSoundDetect(string path) {",
    "mergeKey" : "",
    "extra" : "",
    "language" : "C++",
    "criterionName" : "规则3.3.1 使用 K&R 缩进风格",
    "criterionType" : "common_standard_rule",
    "linkUrl" : "http://3ms.huawei.com/km/groups/3685627/blogs/details/6035347?l=zh-cn",
    "category" : "华为C++语言通用编程规范V3.3 - 3 格式",
    "recommend" : "换行时，函数左大括号另起一行放行首，并独占一行；\n非函数左大括号跟随语句放行末；\n右大括号独占一行，除“}while”，“}else/else if”，“、”，“;”；",
    "typeName" : "C_RULE_ID_KR_STYLE",
    "ruleId" : "701228bb7ff311eab920fa163ea6de8c",
    "events" : [ ],
    "fixCode" : [ {
      "startingLineNumber" : 49,
      "endLineNumber" : 49,
      "startCharacter" : 0,
      "endCharacter" : 0,
      "beforeFixCode" : "void TestSoundDetect(string path) {",
      "afterFixCode" : "void TestSoundDetect(string path)\r\n{",
      "filePath" : "D:\\_project\\AVPipeline\\code\\TAG-2021-06-10-2213\\huawei-avpipeline-android-cpp-demo\\app\\src\\main\\cpp\\native-lib.cpp",
      "type" : "MODIFIED",
      "desc" : ""
    } ]
  }, {
    "id" : "7ba18928dbdd4836878cead7fa4c324d",
    "buggyFilePath" : "app/src/main/cpp/native-lib.cpp",
    "bugId" : "2fe193fc-cd3e-4e8f-bbfb-9c9637f49562",
    "defectLevel" : "1",
    "defectType" : "C_RULE_ID_CORRESPONDING_HEADER",
    "projectRoot" : "D:\\_project\\AVPipeline\\code\\TAG-2021-06-10-2213\\huawei-avpipeline-android-cpp-demo",
    "analyzerName" : "fixbotengine-cxx",
    "description" : "每一个.cpp文件应有一个对应的.h文件，用于声明需要对外公开的类与接口。",
    "mainBuggyLine" : 1,
    "mainBuggyCode" : "#include <jni.h>",
    "mergeKey" : "",
    "extra" : "",
    "language" : "C++",
    "criterionName" : "建议5.1.1 每一个.cpp文件应有一个对应的.h文件，用于声明需要对外公开的类与接口",
    "criterionType" : "common_standard_recommend",
    "linkUrl" : "http://3ms.huawei.com/km/groups/3685627/blogs/details/6035535?l=zh-cn",
    "category" : "华为C++语言通用编程规范V3.3 - 5 头文件",
    "recommend" : "常情况下，每个.cpp文件都有一个相应的.h，用于放置对外提供的函数声明、宏定义、类型定义等。\n如果一个.cpp文件不需要对外公布任何接口，则其就不应当存在。",
    "typeName" : "",
    "ruleId" : "e35e6236739e4fdf92eeb6c8f17a9aab",
    "events" : [ ],
    "fixCode" : [ ]
  }, {
    "id" : "5f4d3cd269da456eaef668d2dc867532",
    "buggyFilePath" : "app/src/main/cpp/native-lib.cpp",
    "bugId" : "49828dec-5c08-46b0-ba5d-3c2197c7f64e",
    "defectLevel" : "1",
    "defectType" : "CPP_RULE_ID_NO_USE_SHAREDPTR",
    "projectRoot" : "D:\\_project\\AVPipeline\\code\\TAG-2021-06-10-2213\\huawei-avpipeline-android-cpp-demo",
    "analyzerName" : "fixbotengine-cxx",
    "description" : "优先使用`unique_ptr`而不是`shared_ptr`。",
    "mainBuggyLine" : 75,
    "mainBuggyCode" : "    using CreateMediaFilterFunc = shared_ptr<MediaFilter>(*)(const MediaMetaSP &meta);",
    "mergeKey" : "",
    "extra" : "",
    "language" : "C++",
    "criterionName" : "规则10.2.2 优先使用`unique_ptr`而不是`shared_ptr`",
    "criterionType" : "common_standard_rule",
    "linkUrl" : "http://3ms.huawei.com/km/groups/3685627/blogs/details/6035885?l=zh-cn",
    "category" : "华为C++语言通用编程规范V3.3 - 10 现代C++特性",
    "recommend" : "shared_ptr引用计数的原子操作存在可测量的开销，大量使用shared_ptr影响性能。\n共享所有权在某些情况（如循环依赖）可能导致对象永远得不到释放。",
    "typeName" : "",
    "ruleId" : "ea2e6508ff474b9dbf660de930956dde",
    "events" : [ ],
    "fixCode" : [ ]
  }, {
    "id" : "5f4d3cd269da456eaef668d2dc867532",
    "buggyFilePath" : "app/src/main/cpp/native-lib.cpp",
    "bugId" : "aa029bd8-50bc-4b52-af61-5488f4d8d9c3",
    "defectLevel" : "1",
    "defectType" : "CPP_RULE_ID_NO_USE_SHAREDPTR",
    "projectRoot" : "D:\\_project\\AVPipeline\\code\\TAG-2021-06-10-2213\\huawei-avpipeline-android-cpp-demo",
    "analyzerName" : "fixbotengine-cxx",
    "description" : "优先使用`unique_ptr`而不是`shared_ptr`。",
    "mainBuggyLine" : 77,
    "mainBuggyCode" : "    shared_ptr<MediaFilter> mFilter = fun(meta);",
    "mergeKey" : "",
    "extra" : "",
    "language" : "C++",
    "criterionName" : "规则10.2.2 优先使用`unique_ptr`而不是`shared_ptr`",
    "criterionType" : "common_standard_rule",
    "linkUrl" : "http://3ms.huawei.com/km/groups/3685627/blogs/details/6035885?l=zh-cn",
    "category" : "华为C++语言通用编程规范V3.3 - 10 现代C++特性",
    "recommend" : "shared_ptr引用计数的原子操作存在可测量的开销，大量使用shared_ptr影响性能。\n共享所有权在某些情况（如循环依赖）可能导致对象永远得不到释放。",
    "typeName" : "",
    "ruleId" : "ea2e6508ff474b9dbf660de930956dde",
    "events" : [ ],
    "fixCode" : [ ]
  }, {
    "id" : "678fa2667b7d48dcbc4ce1feb2e853a5",
    "buggyFilePath" : "app/src/main/cpp/native-lib.cpp",
    "bugId" : "7b2e5359-1161-463d-a6ee-3308a52c6f7c",
    "defectLevel" : "1",
    "defectType" : "C_RULE_ID_FILE_HEAD_COMMENT",
    "projectRoot" : "D:\\_project\\AVPipeline\\code\\TAG-2021-06-10-2213\\huawei-avpipeline-android-cpp-demo",
    "analyzerName" : "fixbotengine-cxx",
    "description" : "文件头注释必须包含版权许可。版权声明为空。",
    "mainBuggyLine" : 1,
    "mainBuggyCode" : "#include <jni.h>",
    "mergeKey" : "",
    "extra" : "",
    "language" : "C++",
    "criterionName" : "规则4.2.1 文件头注释必须包含版权许可和功能说明",
    "criterionType" : "common_standard_rule",
    "linkUrl" : "http://3ms.huawei.com/km/groups/3685627/blogs/details/6035505?l=zh-cn",
    "category" : "华为C++语言通用编程规范V3.3 - 4 注释",
    "recommend" : "/*\n\n * Copyright (c) Huawei Technologies Co., Ltd. 2012-2018. All rights reserved.\n\n * Description: 文件功能描述\n\n * Author: 王小明 w00123456\n\n * Create: 2012-12-22\n\n */",
    "typeName" : "C_RULE_ID_FILE_HEAD_COMMENT",
    "ruleId" : "f1a7981dcd1a40908e997e44397f05e4",
    "events" : [ ],
    "fixCode" : [ {
      "startingLineNumber" : 1,
      "endLineNumber" : 1,
      "startCharacter" : 0,
      "endCharacter" : 0,
      "beforeFixCode" : "#include <jni.h>",
      "afterFixCode" : "/*\r\n * Copyright (c) Huawei Technologies Co., Ltd. 2020-2020. All rights reserved.\r\n */\r\n#include <jni.h>",
      "filePath" : "D:\\_project\\AVPipeline\\code\\TAG-2021-06-10-2213\\huawei-avpipeline-android-cpp-demo\\app\\src\\main\\cpp\\native-lib.cpp",
      "type" : "MODIFIED",
      "desc" : ""
    } ]
  }, {
    "id" : "8dc28c26900711eabaeefa163e12a155",
    "buggyFilePath" : "app/src/main/cpp/native-lib.cpp",
    "bugId" : "ad49f1d5-7cb5-496e-ae47-5078c2165bcd",
    "defectLevel" : "1",
    "defectType" : "CPP_RULE_ID_SMARTPOINTER_INSTEADOF_ORIGINPOINTER",
    "projectRoot" : "D:\\_project\\AVPipeline\\code\\TAG-2021-06-10-2213\\huawei-avpipeline-android-cpp-demo",
    "analyzerName" : "fixbotengine-cxx",
    "description" : "优先使用智能指针而不是原始指针管理资源。",
    "mainBuggyLine" : 95,
    "mainBuggyCode" : "    auto *data = new char[size];",
    "mergeKey" : "",
    "extra" : "",
    "language" : "C++",
    "criterionName" : "规则10.2.1 优先使用智能指针而不是原始指针管理资源",
    "criterionType" : "common_standard_rule",
    "category" : "华为C++语言通用编程规范V3.3 - 10 现代C++特性",
    "typeName" : "",
    "ruleId" : "5484b70d900711eabaeefa163e12a155",
    "events" : [ ],
    "fixCode" : [ ]
  }, {
    "id" : "f52a20b08c8842c9a5c37acc4fefbc6d",
    "buggyFilePath" : "app/src/main/cpp/native-lib.cpp",
    "bugId" : "ec047a37-24ac-41aa-8989-609ba37a6eda",
    "defectLevel" : "1",
    "defectType" : "CPP_RULE_ID_FUN_PARA_POINTER_DETECT",
    "projectRoot" : "D:\\_project\\AVPipeline\\code\\TAG-2021-06-10-2213\\huawei-avpipeline-android-cpp-demo",
    "analyzerName" : "fixbotengine-cxx",
    "description" : "使用智能指针管理资源。",
    "mainBuggyLine" : 37,
    "mainBuggyCode" : "bool ReleaseOutputBuffer(const MediaBuffer *mediaBuffer)",
    "mergeKey" : "",
    "extra" : "",
    "language" : "C++",
    "criterionName" : "建议8.3.1 函数参数使用引用取代指针",
    "criterionType" : "common_standard_recommend",
    "linkUrl" : "http://3ms.huawei.com/km/groups/3685627/blogs/details/6035689?l=zh-cn",
    "category" : "华为C++语言通用编程规范V3.3 - 8 函数",
    "recommend" : "引用比指针更安全，因为它一定非空，且一定不会再指向其他目标；引用不需要检查非法的NULL指针",
    "typeName" : "",
    "ruleId" : "87b0feef298c4984b0be6196a56ec889",
    "events" : [ ],
    "fixCode" : [ ]
  } ]
}